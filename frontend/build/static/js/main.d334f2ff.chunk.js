(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{46:function(e,t,n){},47:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),r=n.n(s),o=n(36),i=n.n(o),c=(n(46),n(4)),l=n(5),u=n(7),h=n(6),d=(n(47),n(40)),p=n(2);n(48);var j=function(e){var t=Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{onClick:function(){return e.display_form("login")},children:"login"}),Object(a.jsx)("li",{onClick:function(){return e.display_form("signup")},children:"signup"})]}),n=Object(a.jsx)("ul",{children:Object(a.jsx)("li",{onClick:e.handle_logout,children:"logout"})});return Object(a.jsx)("div",{children:e.logged_in?n:t})},m=n(19),b=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:""},e.handle_change=function(t){var n=t.target.name,a=t.target.value;e.setState((function(e){var t=Object(m.a)({},e);return t[n]=a,t}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("form",{onSubmit:function(t){return e.props.handle_login(t,e.state)},children:[Object(a.jsx)("h4",{children:"Log In"}),Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handle_change}),Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handle_change}),Object(a.jsx)("input",{type:"submit"})]})}}]),n}(r.a.Component),g=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:""},e.handle_change=function(t){var n=t.target.name,a=t.target.value;e.setState((function(e){var t=Object(m.a)({},e);return t[n]=a,t}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("form",{onSubmit:function(t){return e.props.handle_signup(t,e.state)},children:[Object(a.jsx)("h4",{children:"Sign Up"}),Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handle_change}),Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handle_change}),Object(a.jsx)("input",{type:"submit"})]})}}]),n}(r.a.Component),f=n(13),O=n.n(f),v=n(17),x=n(22),y=n(23),k=n(18),_=n.n(k),w=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={name:"",imageUrl:"",pokemonIndex:"",abilities:"",height:"",weight:""},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(O.a.mark((function e(){var t,n,a,s,r,o,i,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.index,console.log(t),n="https://pokeapi.co/api/v2/pokemon/".concat(t,"/"),e.next=5,_.a.get(n);case 5:a=e.sent,s=a.data.sprites.front_default,r=a.data.name,o=a.data.height,i=a.data.weight,c=a.data.abilities.map((function(e){return e.ability.name.toLowerCase().split("-").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ")})).join(", "),this.setState({name:r,height:o,weight:i,abilities:c,imageUrl:s});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(a.jsx)("div",{className:"modal-body",children:Object(a.jsx)("div",{className:"modal-dialog",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsx)("h4",{children:this.state.name}),Object(a.jsx)("img",{src:this.state.imageUrl,className:"card-img-top rounded mx-auto mt-2"}),Object(a.jsxs)("h6",{className:"float-right",children:["Height: ",this.state.height]}),Object(a.jsxs)("h6",{className:"float-right",children:["Height: ",this.state.weight]}),Object(a.jsxs)("h6",{className:"float-right",children:["Abilities: ",this.state.abilities]})]})})})}}]),n}(s.Component);function S(){var e=Object(x.a)(["\n  opacity: 0.95;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n  &:hover {\n    box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\n  }\n  -moz-user-select: none;\n  -website-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -o-user-select: none;\n"]);return S=function(){return e},e}function C(){var e=Object(x.a)(["\n  width: 5em;\n  height: 5em;\n  display: none;\n"]);return C=function(){return e},e}var N=y.a.img(C()),I=y.a.div(S()),P=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={name:"",imageUrl:"",pokemonIndex:"",seen:!1},e.togglePop=function(){console.log("POP!"),e.setState({seen:!e.state.seen})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,n=e.url,a=n.split("/")[n.split("/").length-2],s="https://github.com/PokeAPI/sprites/blob/master/sprites/pokemon/".concat(a,".png?raw=true");this.setState({name:t,imageUrl:s,pokemonIndex:a})}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"col-md-3 col-sm-6 mb-5",onClick:this.togglePop,children:[Object(a.jsxs)(I,{className:"card",children:[Object(a.jsx)("h5",{className:"card-header",children:this.state.pokemonIndex}),Object(a.jsx)(N,{className:"card-img-top rounded mx-auto mt-2",src:this.state.imageUrl,style:{display:"block"}}),Object(a.jsx)("div",{className:"card-body mx-auto",children:Object(a.jsx)("h6",{className:"card-title",children:this.state.name.toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ")})})]}),this.state.seen?Object(a.jsx)(w,{toogle:this.tooglePop,index:this.state.pokemonIndex}):null]})}}]),n}(s.Component),A=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).token=null,e.state={pokemon:null,input_val:""},e.filterOnChange=function(t){e.setState({input_val:t.target.value}),e.search(t.target.value)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){console.log("I was triggered during componentDidMount"),this.search("")}},{key:"search",value:function(){var e=Object(v.a)(O.a.mark((function e(t){var n,a,s=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.toLowerCase(),n="https://pokeapi.co/api/v2/pokemon/".concat(t),a={},this.token=a,e.next=6,_.a.get(n).then((function(e){if(s.token==a)if(""==t)s.setState({pokemon:e.data.results});else try{var n=e.data.forms[0].url.split("/"),r=n[n.length-2];s.setState({pokemon:[{name:t,url:"https://pokeapi.co/api/v2/pokemon/".concat(r)}]})}catch(o){s.setState({pokemon:null})}}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return""!==this.state.input_val&&this.search(this.state.input_val),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("label",{htmlFor:"search",children:"Search by name"}),Object(a.jsx)("input",{type:"text",onChange:this.filterOnChange})]}),this.state.pokemon?Object(a.jsx)("div",{className:"row",children:this.state.pokemon.map((function(e){return Object(a.jsx)(P,{name:e.name,url:e.url},e.name)}))}):Object(a.jsx)("h4",{children:"Loading..."})]})}}]),n}(s.Component),U=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(A,{})})})}}]),n}(s.Component),F=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handle_login=function(e,t){e.preventDefault(),fetch("http://localhost:8000/token-auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token",e.token),a.setState({logged_in:!0,displayed_form:"",username:e.user.username})}))},a.handle_signup=function(e,t){e.preventDefault(),fetch("http://localhost:8000/core/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token",e.token),a.setState({logged_in:!0,displayed_form:"",username:e.username})}))},a.handle_logout=function(){localStorage.removeItem("token"),a.setState({logged_in:!1,username:""})},a.display_form=function(e){a.setState({displayed_form:e})},a.state={displayed_form:"",logged_in:!!localStorage.getItem("token"),username:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.logged_in&&fetch("http://localhost:8000/core/current_user/",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(t){e.setState({username:t.username})}))}},{key:"render",value:function(){var e;switch(this.state.displayed_form){case"login":e=Object(a.jsx)(b,{handle_login:this.handle_login});break;case"signup":e=Object(a.jsx)(g,{handle_signup:this.handle_signup});break;default:e=null}return Object(a.jsx)(d.a,{children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(j,{logged_in:this.state.logged_in,display_form:this.display_form,handle_logout:this.handle_logout}),e,this.state.logged_in?Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(p.c,{children:Object(a.jsx)(p.a,{exact:!0,path:"/",component:U})})}):Object(a.jsx)("h3",{children:"Please log in!"})]})})}}]),n}(s.Component),D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,72)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),r(e),o(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(F,{})}),document.getElementById("root")),D()}},[[71,1,2]]]);
//# sourceMappingURL=main.d334f2ff.chunk.js.map